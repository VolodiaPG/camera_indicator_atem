(self.webpackChunksvelte_app=self.webpackChunksvelte_app||[]).push([[826],{386:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>R});var o=n(379),r=n(271),s=n(796),$=n(731);function c(e){let t,n,s;return t=new r.JO({props:{name:"gear"}}),{c(){(0,o.YC)(t.$$.fragment),n=(0,o.fL)("Â Settings")},m(e,r){(0,o.ye)(t,e,r),(0,o.$T)(e,n,r),s=!0},p:o.ZT,i(e){s||((0,o.Ui)(t.$$.fragment,e),s=!0)},o(e){(0,o.et)(t.$$.fragment,e),s=!1},d(e){(0,o.vp)(t,e),e&&(0,o.og)(n)}}}function i(e){let t;return{c(){t=(0,o.fL)("Settings")},m(e,n){(0,o.$T)(e,t,n)},d(e){e&&(0,o.og)(t)}}}function a(e){let t,n,s,$,c,i,a,l,f,u,p,g,m,d,v,y=e[4](e[3])?.preview+"",b=e[4](e[3])?.air+"";function h(t){e[6](t)}let w={type:"number",placeholder:"Camera ID"};return void 0!==e[1]&&(w.value=e[1]),m=new r.II({props:w}),o.Vn.push((()=>(0,o.ak)(m,"value",h))),{c(){t=(0,o.bG)("div"),n=(0,o.fL)("Preview: "),s=(0,o.fL)(y),$=(0,o.Dh)(),c=(0,o.bG)("div"),i=(0,o.fL)("air: "),a=(0,o.fL)(b),l=(0,o.Dh)(),f=(0,o.bG)("div"),u=(0,o.fL)("my ID: "),p=(0,o.fL)(e[0]),g=(0,o.Dh)(),(0,o.YC)(m.$$.fragment)},m(e,r){(0,o.$T)(e,t,r),(0,o.R3)(t,n),(0,o.R3)(t,s),(0,o.$T)(e,$,r),(0,o.$T)(e,c,r),(0,o.R3)(c,i),(0,o.R3)(c,a),(0,o.$T)(e,l,r),(0,o.$T)(e,f,r),(0,o.R3)(f,u),(0,o.R3)(f,p),(0,o.$T)(e,g,r),(0,o.ye)(m,e,r),v=!0},p(e,t){(!v||8&t)&&y!==(y=e[4](e[3])?.preview+"")&&(0,o.rT)(s,y),(!v||8&t)&&b!==(b=e[4](e[3])?.air+"")&&(0,o.rT)(a,b),(!v||1&t)&&(0,o.rT)(p,e[0]);const n={};!d&&2&t&&(d=!0,n.value=e[1],(0,o.hj)((()=>d=!1))),m.$set(n)},i(e){v||((0,o.Ui)(m.$$.fragment,e),v=!0)},o(e){(0,o.et)(m.$$.fragment,e),v=!1},d(e){e&&(0,o.og)(t),e&&(0,o.og)($),e&&(0,o.og)(c),e&&(0,o.og)(l),e&&(0,o.og)(f),e&&(0,o.og)(g),(0,o.vp)(m,e)}}}function l(e){let t;return{c(){t=(0,o.fL)("Close")},m(e,n){(0,o.$T)(e,t,n)},d(e){e&&(0,o.og)(t)}}}function f(e){let t,n;return t=new r.zx({props:{color:"secondary",$$slots:{default:[l]},$$scope:{ctx:e}}}),t.$on("click",e[5]),{c(){(0,o.YC)(t.$$.fragment)},m(e,r){(0,o.ye)(t,e,r),n=!0},p(e,n){const o={};128&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||((0,o.Ui)(t.$$.fragment,e),n=!0)},o(e){(0,o.et)(t.$$.fragment,e),n=!1},d(e){(0,o.vp)(t,e)}}}function u(e){let t,n,s,$,c,l;return t=new r.xB({props:{toggle:e[5],$$slots:{default:[i]},$$scope:{ctx:e}}}),s=new r.fe({props:{$$slots:{default:[a]},$$scope:{ctx:e}}}),c=new r.mz({props:{$$slots:{default:[f]},$$scope:{ctx:e}}}),{c(){(0,o.YC)(t.$$.fragment),n=(0,o.Dh)(),(0,o.YC)(s.$$.fragment),$=(0,o.Dh)(),(0,o.YC)(c.$$.fragment)},m(e,r){(0,o.ye)(t,e,r),(0,o.$T)(e,n,r),(0,o.ye)(s,e,r),(0,o.$T)(e,$,r),(0,o.ye)(c,e,r),l=!0},p(e,n){const o={};128&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o);const r={};139&n&&(r.$$scope={dirty:n,ctx:e}),s.$set(r);const $={};128&n&&($.$$scope={dirty:n,ctx:e}),c.$set($)},i(e){l||((0,o.Ui)(t.$$.fragment,e),(0,o.Ui)(s.$$.fragment,e),(0,o.Ui)(c.$$.fragment,e),l=!0)},o(e){(0,o.et)(t.$$.fragment,e),(0,o.et)(s.$$.fragment,e),(0,o.et)(c.$$.fragment,e),l=!1},d(e){(0,o.vp)(t,e),e&&(0,o.og)(n),(0,o.vp)(s,e),e&&(0,o.og)($),(0,o.vp)(c,e)}}}function p(e){let t,n,s,$,i;return n=new r.zx({props:{outline:!0,color:"secondary",$$slots:{default:[c]},$$scope:{ctx:e}}}),n.$on("click",e[5]),$=new r.u_({props:{isOpen:e[2],toggle:e[5],$$slots:{default:[u]},$$scope:{ctx:e}}}),{c(){t=(0,o.bG)("main"),(0,o.YC)(n.$$.fragment),s=(0,o.Dh)(),(0,o.YC)($.$$.fragment)},m(e,r){(0,o.$T)(e,t,r),(0,o.ye)(n,t,null),(0,o.R3)(t,s),(0,o.ye)($,t,null),i=!0},p(e,[t]){const o={};128&t&&(o.$$scope={dirty:t,ctx:e}),n.$set(o);const r={};4&t&&(r.isOpen=e[2]),139&t&&(r.$$scope={dirty:t,ctx:e}),$.$set(r)},i(e){i||((0,o.Ui)(n.$$.fragment,e),(0,o.Ui)($.$$.fragment,e),i=!0)},o(e){(0,o.et)(n.$$.fragment,e),(0,o.et)($.$$.fragment,e),i=!1},d(e){e&&(0,o.og)(t),(0,o.vp)(n),(0,o.vp)($)}}}function g(e,t,n){let r;(0,o.FI)(e,$.D,(e=>n(3,r=e)));let c,i=!0,{camera_id:a=-1}=t;return e.$$set=e=>{"camera_id"in e&&n(0,a=e.camera_id)},e.$$.update=()=>{if(2&e.$$.dirty){const e=parseInt(c);isNaN(e)||n(0,a=e)}1&e.$$.dirty&&$.a.set(a)},[a,c,i,r,e=>{if((0,s.V)(e))return e},()=>n(2,i=!i),function(e){c=e,n(1,c)}]}class m extends o.f_{constructor(e){super(),(0,o.S1)(this,e,g,p,o.N8,{camera_id:0})}}const d=m;var v=n(400);function y(e){let t,n;return t=new r.bZ({props:{color:e[0].color,$$slots:{default:[b]},$$scope:{ctx:e}}}),{c(){(0,o.YC)(t.$$.fragment)},m(e,r){(0,o.ye)(t,e,r),n=!0},p(e,n){const o={};1&n&&(o.color=e[0].color),33&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||((0,o.Ui)(t.$$.fragment,e),n=!0)},o(e){(0,o.et)(t.$$.fragment,e),n=!1},d(e){(0,o.vp)(t,e)}}}function b(e){let t,n,r=e[0].text+"";return{c(){t=(0,o.bG)("span"),n=(0,o.fL)(r)},m(e,r){(0,o.$T)(e,t,r),(0,o.R3)(t,n)},p(e,t){1&t&&r!==(r=e[0].text+"")&&(0,o.rT)(n,r)},d(e){e&&(0,o.og)(t)}}}function h(e){let t,n,r=void 0!==e[0]&&y(e);return{c(){t=(0,o.bG)("main"),r&&r.c()},m(e,s){(0,o.$T)(e,t,s),r&&r.m(t,null),n=!0},p(e,[n]){void 0!==e[0]?r?(r.p(e,n),1&n&&(0,o.Ui)(r,1)):(r=y(e),r.c(),(0,o.Ui)(r,1),r.m(t,null)):r&&((0,o.dv)(),(0,o.et)(r,1,1,(()=>{r=null})),(0,o.gb)())},i(e){n||((0,o.Ui)(r),n=!0)},o(e){(0,o.et)(r),n=!1},d(e){e&&(0,o.og)(t),r&&r.d()}}}function w(e,t,n){let o,r,{message:s}=t,$=[];function c(){if(0===$.length)return n(0,o=void 0),void(r=-1);r<0&&(n(0,o=$.pop()),r=setTimeout((()=>{n(0,o=void 0),r=-1,setTimeout((()=>{c()}),250)}),1e3*o.timeout))}return(0,v.H3)((()=>{r=-1,n(2,$=[])})),e.$$set=e=>{"message"in e&&n(1,s=e.message)},e.$$.update=()=>{6&e.$$.dirty&&void 0!==s&&($.push(s),c())},[o,s,$]}class T extends o.f_{constructor(e){super(),(0,o.S1)(this,e,w,h,o.N8,{message:1})}}const x=T;function C(e){let t,n,r,s;var $=x;function c(e){return{props:{message:e[0]}}}return $&&(r=new $(c(e))),{c(){t=(0,o.bG)("main"),n=(0,o.bG)("div"),r&&(0,o.YC)(r.$$.fragment),(0,o.Lj)(n,"class","fixed-bottom m-5 message-text svelte-itidh2")},m(e,$){(0,o.$T)(e,t,$),(0,o.R3)(t,n),r&&(0,o.ye)(r,n,null),s=!0},p(e,[t]){const s={};if(1&t&&(s.message=e[0]),$!==($=x)){if(r){(0,o.dv)();const e=r;(0,o.et)(e.$$.fragment,1,0,(()=>{(0,o.vp)(e,1)})),(0,o.gb)()}$?(r=new $(c(e)),(0,o.YC)(r.$$.fragment),(0,o.Ui)(r.$$.fragment,1),(0,o.ye)(r,n,null)):r=null}else $&&r.$set(s)},i(e){s||(r&&(0,o.Ui)(r.$$.fragment,e),s=!0)},o(e){r&&(0,o.et)(r.$$.fragment,e),s=!1},d(e){e&&(0,o.og)(t),r&&(0,o.vp)(r)}}}function U(e,t,n){let o;const r=$.D.subscribe((e=>{(e=>{let t=null!=e;return t=t&&void 0!==e.text,t=t&&void 0!==e.timeout,t=t&&["success","danger","warning","info"].includes(e.color),t})(e)&&(console.log(e),n(0,o=e))}));return(0,v.ev)(r),[o]}class _ extends o.f_{constructor(e){super(),(0,o.S1)(this,e,U,C,o.N8,{})}}const D=_;function Y(e){let t,n,r,s,$,c,i;function a(t){e[3](t)}var l=d;function f(e){let t={};return void 0!==e[0]&&(t.camera_id=e[0]),{props:t}}l&&(r=new l(f(e)),o.Vn.push((()=>(0,o.ak)(r,"camera_id",a))));var u=D;return u&&(c=new u({})),{c(){t=(0,o.bG)("main"),n=(0,o.bG)("div"),r&&(0,o.YC)(r.$$.fragment),$=(0,o.Dh)(),c&&(0,o.YC)(c.$$.fragment),(0,o.Lj)(n,"class","top-left m-4 svelte-ojrhjv"),(0,o.Lj)(t,"class","svelte-ojrhjv"),(0,o.VH)(t,"bg-danger",e[2](e[1])?.air===e[0]),(0,o.VH)(t,"bg-success",e[2](e[1])?.preview===e[0])},m(e,s){(0,o.$T)(e,t,s),(0,o.R3)(t,n),r&&(0,o.ye)(r,n,null),(0,o.R3)(t,$),c&&(0,o.ye)(c,t,null),i=!0},p(e,[$]){const i={};if(!s&&1&$&&(s=!0,i.camera_id=e[0],(0,o.hj)((()=>s=!1))),l!==(l=d)){if(r){(0,o.dv)();const e=r;(0,o.et)(e.$$.fragment,1,0,(()=>{(0,o.vp)(e,1)})),(0,o.gb)()}l?(r=new l(f(e)),o.Vn.push((()=>(0,o.ak)(r,"camera_id",a))),(0,o.YC)(r.$$.fragment),(0,o.Ui)(r.$$.fragment,1),(0,o.ye)(r,n,null)):r=null}else l&&r.$set(i);if(u!==(u=D)){if(c){(0,o.dv)();const e=c;(0,o.et)(e.$$.fragment,1,0,(()=>{(0,o.vp)(e,1)})),(0,o.gb)()}u?(c=new u({}),(0,o.YC)(c.$$.fragment),(0,o.Ui)(c.$$.fragment,1),(0,o.ye)(c,t,null)):c=null}7&$&&(0,o.VH)(t,"bg-danger",e[2](e[1])?.air===e[0]),7&$&&(0,o.VH)(t,"bg-success",e[2](e[1])?.preview===e[0])},i(e){i||(r&&(0,o.Ui)(r.$$.fragment,e),c&&(0,o.Ui)(c.$$.fragment,e),i=!0)},o(e){r&&(0,o.et)(r.$$.fragment,e),c&&(0,o.et)(c.$$.fragment,e),i=!1},d(e){e&&(0,o.og)(t),r&&(0,o.vp)(r),c&&(0,o.vp)(c)}}}function j(e,t,n){let r,c,i;return(0,o.FI)(e,$.D,(e=>n(1,r=e))),[c,r,e=>((0,s.V)(e)&&(i=e),i),function(e){c=e,n(0,c)}]}class L extends o.f_{constructor(e){super(),(0,o.S1)(this,e,j,Y,o.N8,{})}}const R=L},796:(e,t,n)=>{"use strict";n.d(t,{V:()=>o});let o=e=>null!=e&&void 0!==e.preview&&void 0!==e.air},731:(e,t,n)=>{"use strict";n.d(t,{a:()=>r,D:()=>s});var o=n(120);const r=(0,o.fZ)(10),s=(0,o.fZ)({});let $,c;r.subscribe((e=>{return t=e,clearTimeout(c),void(c=setTimeout((()=>{(async e=>{if(console.log(e),e<1||e>8)return;const t=await fetch("/api/register",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({camera_id:e})});let n=(await t.json()).url;console.log("Connecting to url ",n),null==$||$.close(),$=(e=>{let t=new WebSocket(e);return t.onopen=function(e){console.log("[open] Connection established")},t.onmessage=function(e){try{const t=JSON.parse(e.data);console.log(`[message] Data received from server (json): ${e.data}`),s.set(t)}catch(t){console.log(`[message] Data received from server (NOT json): ${e.data}`)}},t.onclose=function(e){e.wasClean?console.log(`[close] Connection closed cleanly, code=${e.code} reason=${e.reason}`):console.warn("[close] Connection died")},t.onerror=function(e){console.warn(`[error] ${e}`)},t})(n)})(+t)}),750));var t}))}}]);